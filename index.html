<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluación Unidad 7: Química Orgánica</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .quiz-container {
            max-width: 800px;
            margin: auto;
        }
        .question {
            margin-bottom: 20px;
        }
        .question strong {
            display: block;
            margin-bottom: 10px;
        }
        .options {
            list-style: none;
            padding: 0;
        }
        .options li {
            margin-bottom: 10px;
        }
        #submit {
            margin-top: 20px;
        }
        #resultModal {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        #resultModal .close {
            float: right;
            cursor: pointer;
        }
        #timer {
            font-size: 20px;
            font-weight: bold;
            color: green;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h2>Evaluación Unidad 7: Química Orgánica</h2>
        <p>Nombre: <input type="text" id="fullname" required></p>
        <p>NIE: <input type="text" id="nie" required></p>
        <button id="startQuiz">Comenzar Evaluación</button>

        <div id="quiz" style="display: none;">
            <!-- Aquí se insertarán las preguntas -->
        </div>

        <div id="resultModal">
            <span class="close">X</span>
            <h2>Resultados</h2>
            <p id="modalName"></p>
            <p id="modalNIE"></p>
            <p id="modalDetails"></p>
            <p id="modalIncorrectAnswers"></p>
            <p id="attemptCount"></p>
            <p id="manipulationCount"></p>
            <button id="submit" disabled>Obtener Calificación</button>
        </div>
    </div>

    <div id="timer">30:00</div>

    <script>
        const quizData = [
            {
                question: "¿Cómo se denomina a los compuestos que contienen solo átomos de carbono e hidrógeno?",
                answers: [
                    { text: "Hidrocarburos.", correct: true },
                    { text: "Alcoholes.", correct: false },
                    { text: "Ésteres.", correct: false },
                    { text: "Amidas.", correct: false }
                ]
            },
            {
                question: "¿Qué biomolécula es crucial para la formación de estructuras celulares en los organismos?",
                answers: [
                    { text: "Proteínas.", correct: true },
                    { text: "Carbohidratos.", correct: false },
                    { text: "Ácidos nucleicos.", correct: false },
                    { text: "Lípidos.", correct: false }
                ]
            },
            {
                question: "¿Cómo se comportan los hidrocarburos en presencia de oxígeno?",
                answers: [
                    { text: "Se oxidan, liberando dióxido de carbono y agua.", correct: true },
                    { text: "Se reducen, absorbiendo oxígeno.", correct: false },
                    { text: "No reaccionan con el oxígeno.", correct: false },
                    { text: "Forman óxidos metálicos.", correct: false }
                ]
            },
            {
                question: "¿Cuál es el impacto ambiental más significativo de los hidrocarburos?",
                answers: [
                    { text: "Contribuyen al calentamiento global debido a la emisión de CO2 al quemarse.", correct: true },
                    { text: "Son completamente inofensivos para el medio ambiente.", correct: false },
                    { text: "No tienen impacto ambiental significativo.", correct: false },
                    { text: "Solo afectan la capa de ozono.", correct: false }
                ]
            },
            {
                question: "¿Qué biomolécula es fundamental en la producción de energía en los organismos vivos?",
                answers: [
                    { text: "Carbohidratos.", correct: true },
                    { text: "Proteínas.", correct: false },
                    { text: "Ácidos nucleicos.", correct: false },
                    { text: "Lípidos.", correct: false }
                ]
            },
            {
                question: "¿Cuál es la importancia de representar modelos moleculares en la química orgánica?",
                answers: [
                    { text: "Ayuda a entender la estructura, propiedades y reactividad de los compuestos.", correct: true },
                    { text: "Solo es útil para ilustrar compuestos inorgánicos.", correct: false },
                    { text: "Es irrelevante para la comprensión de la química orgánica.", correct: false },
                    { text: "Se utiliza únicamente en la industria farmacéutica.", correct: false }
                ]
            },
            {
                question: "¿Qué aplicación importante tiene el carbono en la medicina?",
                answers: [
                    { text: "Carbón activado para el tratamiento de intoxicaciones.", correct: true },
                    { text: "Diamante para la fabricación de lentes de contacto.", correct: false },
                    { text: "Grafito para prótesis.", correct: false },
                    { text: "Fullereno como antioxidante.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de isomería se encuentra comúnmente en los compuestos orgánicos?",
                answers: [
                    { text: "Isomería estructural.", correct: true },
                    { text: "Isomería geométrica.", correct: false },
                    { text: "Isomería óptica.", correct: false },
                    { text: "Isomería conformacional.", correct: false }
                ]
            },
            {
                question: "¿Qué biomolécula es esencial en la producción de jabones y detergentes?",
                answers: [
                    { text: "Lípidos.", correct: true },
                    { text: "Carbohidratos.", correct: false },
                    { text: "Proteínas.", correct: false },
                    { text: "Ácidos nucleicos.", correct: false }
                ]
            },
            {
                question: "¿Qué hidrocarburo es un componente principal del gas natural?",
                answers: [
                    { text: "Metano.", correct: true },
                    { text: "Butano.", correct: false },
                    { text: "Propano.", correct: false },
                    { text: "Etano.", correct: false }
                ]
            },
            {
                question: "¿Qué biomolécula es esencial en la producción de alimentos y nutrición?",
                answers: [
                    { text: "Carbohidratos.", correct: true },
                    { text: "Proteínas.", correct: false },
                    { text: "Lípidos.", correct: false },
                    { text: "Ácidos nucleicos.", correct: false }
                ]
            },
            {
                question: "¿Qué producto derivado de los hidrocarburos es esencial en la fabricación de neumáticos?",
                answers: [
                    { text: "El caucho sintético.", correct: true },
                    { text: "El plástico.", correct: false },
                    { text: "El vidrio.", correct: false },
                    { text: "El acero.", correct: false }
                ]
            },
            {
                question: "¿Qué propiedad química es característica de los alquenos?",
                answers: [
                    { text: "Reactividad en reacciones de adición.", correct: true },
                    { text: "Estabilidad química.", correct: false },
                    { text: "Insolubilidad en solventes no polares.", correct: false },
                    { text: "Bajo punto de fusión.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de enlaces predominan en los compuestos orgánicos?",
                answers: [
                    { text: "Enlaces covalentes.", correct: true },
                    { text: "Enlaces iónicos.", correct: false },
                    { text: "Enlaces metálicos.", correct: false },
                    { text: "Enlaces de hidrógeno.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de modelo molecular muestra la disposición tridimensional de los átomos en una molécula?",
                answers: [
                    { text: "Modelo de bolas y varillas.", correct: true },
                    { text: "Modelo de esqueleto.", correct: false },
                    { text: "Estructura de Fischer.", correct: false },
                    { text: "Estructura de Lewis.", correct: false }
                ]
            },
            {
                question: "¿Qué información proporciona la estructura de Lewis de un compuesto?",
                answers: [
                    { text: "Los pares de electrones compartidos y no compartidos.", correct: true },
                    { text: "La forma geométrica de la molécula.", correct: false },
                    { text: "La reactividad química de la molécula.", correct: false },
                    { text: "La longitud y energía de los enlaces.", correct: false }
                ]
            },
            {
                question: "¿Cuál es la representación molecular más común de los hidrocarburos?",
                answers: [
                    { text: "Estructura de esqueleto.", correct: true },
                    { text: "Estructura de puntos de Lewis.", correct: false },
                    { text: "Estructura de Fischer.", correct: false },
                    { text: "Estructura de Newman.", correct: false }
                ]
            },
            {
                question: "¿Qué propiedad del carbono le permite formar estructuras en forma de cadena?",
                answers: [
                    { text: "Catenación.", correct: true },
                    { text: "Ionización.", correct: false },
                    { text: "Solubilidad.", correct: false },
                    { text: "Electronegatividad.", correct: false }
                ]
            },
            {
                question: "¿Cuál es una propiedad física distintiva de los alquinos?",
                answers: [
                    { text: "Son menos densos que el agua.", correct: true },
                    { text: "Tienen altos puntos de ebullición.", correct: false },
                    { text: "Son más densos que el agua.", correct: false },
                    { text: "Son solubles en agua.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de hidrocarburos se utiliza principalmente en la producción de polímeros?",
                answers: [
                    { text: "Alquenos.", correct: true },
                    { text: "Alcanos.", correct: false },
                    { text: "Alquinos.", correct: false },
                    { text: "Aromáticos.", correct: false }
                ]
            },
            {
                question: "¿Cuál es una de las aplicaciones más importantes de los hidrocarburos en la industria?",
                answers: [
                    { text: "Producción de plásticos.", correct: true },
                    { text: "Producción de fertilizantes.", correct: false },
                    { text: "Producción de textiles.", correct: false },
                    { text: "Producción de medicamentos.", correct: false }
                ]
            },
            {
                question: "¿Qué propiedad química es común en los hidrocarburos aromáticos?",
                answers: [
                    { text: "Estabilidad debido a la resonancia.", correct: true },
                    { text: "Alta reactividad en reacciones de adición.", correct: false },
                    { text: "Facilidad para formar sales.", correct: false },
                    { text: "Solubilidad en agua.", correct: false }
                ]
            },
            {
                question: "¿Qué hidrocarburo es conocido por ser un gas de efecto invernadero más potente que el dióxido de carbono?",
                answers: [
                    { text: "Metano.", correct: true },
                    { text: "Etano.", correct: false },
                    { text: "Propano.", correct: false },
                    { text: "Butano.", correct: false }
                ]
            },
            {
                question: "¿Cómo afecta la quema de hidrocarburos al ciclo del carbono en la naturaleza?",
                answers: [
                    { text: "Libera dióxido de carbono, aumentando la cantidad de gases de efecto invernadero.", correct: true },
                    { text: "Reduce la cantidad de carbono en el ciclo, disminuyendo los gases de efecto invernadero.", correct: false },
                    { text: "No tiene ningún efecto en el ciclo del carbono.", correct: false },
                    { text: "Interrumpe el ciclo del carbono por completo.", correct: false }
                ]
            },
            {
                question: "¿Qué representa la fórmula molecular de un compuesto orgánico?",
                answers: [
                    { text: "El número y tipo de átomos en la molécula.", correct: true },
                    { text: "La disposición tridimensional de los átomos.", correct: false },
                    { text: "La longitud de los enlaces.", correct: false },
                    { text: "La reactividad química del compuesto.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de hidrocarburo se utiliza comúnmente como combustible en automóviles?",
                answers: [
                    { text: "Alcanos.", correct: true },
                    { text: "Alquenos.", correct: false },
                    { text: "Alquinos.", correct: false },
                    { text: "Aromáticos.", correct: false }
                ]
            },
            {
                question: "¿Cuál de las siguientes propiedades es común en todos los hidrocarburos?",
                answers: [
                    { text: "Son compuestos no polares.", correct: true },
                    { text: "Son compuestos polares.", correct: false },
                    { text: "Son solubles en agua.", correct: false },
                    { text: "Forman enlaces iónicos.", correct: false }
                ]
            },
            {
                question: "¿Qué biomolécula es más importante en la producción de biocombustibles?",
                answers: [
                    { text: "Lípidos.", correct: true },
                    { text: "Proteínas.", correct: false },
                    { text: "Carbohidratos.", correct: false },
                    { text: "Ácidos nucleicos.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de biomolécula actúa como catalizador en las reacciones biológicas?",
                answers: [
                    { text: "Proteínas (enzimas).", correct: true },
                    { text: "Carbohidratos.", correct: false },
                    { text: "Lípidos.", correct: false },
                    { text: "Ácidos nucleicos.", correct: false }
                ]
            },
            {
                question: "¿Cuál de las siguientes es una propiedad física común de los alcanos?",
                answers: [
                    { text: "Son insolubles en agua.", correct: true },
                    { text: "Son solubles en agua.", correct: false },
                    { text: "Tienen altos puntos de ebullición.", correct: false },
                    { text: "Son altamente reactivos.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de reacción es característica de los alquenos debido a la presencia de un doble enlace?",
                answers: [
                    { text: "Reacción de adición.", correct: true },
                    { text: "Reacción de sustitución.", correct: false },
                    { text: "Reacción de eliminación.", correct: false },
                    { text: "Reacción de polimerización.", correct: false }
                ]
            },
            {
                question: "¿Cuál de las siguientes es una aplicación cotidiana del carbono?",
                answers: [
                    { text: "El grafito en los lápices.", correct: true },
                    { text: "La sal de mesa.", correct: false },
                    { text: "El cloruro de sodio en detergentes.", correct: false },
                    { text: "El aluminio en papel de aluminio.", correct: false }
                ]
            },
            {
                question: "¿Cuál es la característica principal del átomo de carbono que le permite formar una gran variedad de compuestos?",
                answers: [
                    { text: "Su capacidad para formar cuatro enlaces covalentes.", correct: true },
                    { text: "Su capacidad para formar enlaces iónicos.", correct: false },
                    { text: "Su capacidad para formar enlaces metálicos.", correct: false },
                    { text: "Su capacidad para formar compuestos inorgánicos.", correct: false }
                ]
            },
            {
                question: "¿Qué biomolécula es clave en la transmisión de información genética?",
                answers: [
                    { text: "Ácidos nucleicos.", correct: true },
                    { text: "Proteínas.", correct: false },
                    { text: "Carbohidratos.", correct: false },
                    { text: "Lípidos.", correct: false }
                ]
            },
            {
                question: "¿Qué modelo molecular es útil para visualizar la rotación alrededor de enlaces simples?",
                answers: [
                    { text: "Modelo de Newman.", correct: true },
                    { text: "Modelo de esqueleto.", correct: false },
                    { text: "Estructura de Lewis.", correct: false },
                    { text: "Estructura de Fischer.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de biomolécula se utiliza en la industria farmacéutica para la síntesis de medicamentos?",
                answers: [
                    { text: "Proteínas.", correct: true },
                    { text: "Carbohidratos.", correct: false },
                    { text: "Ácidos nucleicos.", correct: false },
                    { text: "Lípidos.", correct: false }
                ]
            },
            {
                question: "¿Qué tipo de información no se puede obtener de un modelo de esqueleto?",
                answers: [
                    { text: "El número exacto de átomos de hidrógeno.", correct: true },
                    { text: "La disposición de átomos de carbono.", correct: false },
                    { text: "La orientación de los enlaces.", correct: false },
                    { text: "La conectividad entre los átomos de carbono.", correct: false }
                ]
            },
            {
                question: "¿Cuál es una característica distintiva de los hidrocarburos saturados?",
                answers: [
                    { text: "Solo tienen enlaces simples entre átomos de carbono.", correct: true },
                    { text: "Tienen al menos un enlace doble o triple entre átomos de carbono.", correct: false },
                    { text: "Son altamente reactivos.", correct: false },
                    { text: "Son inestables.", correct: false }
                ]
            },
            {
                question: "¿Qué representa la estructura de esqueleto en un compuesto orgánico?",
                answers: [
                    { text: "Las conexiones entre átomos de carbono, sin mostrar los átomos de hidrógeno.", correct: true },
                    { text: "La disposición tridimensional completa de la molécula.", correct: false },
                    { text: "La estructura completa con todos los átomos y enlaces.", correct: false },
                    { text: "La orientación espacial de los grupos funcionales.", correct: false }
                ]
            },
            {
                question: "¿Cuál de las siguientes formas del carbono se utiliza en joyería?",
                answers: [
                    { text: "Diamante.", correct: true },
                    { text: "Grafito.", correct: false },
                    { text: "Fullereno.", correct: false },
                    { text: "Carbón activado.", correct: false }
                ]
            }
        ];

const authorizedNIEs = [
            "4267837", "3850952", "3851018", "5032035", "19806181", "6297536", "2608724",
            "6262810", "4267838", "20162435", "3850923", "19806209", "4267828", "3850942"
        ];

        let attempt = 0;
        const maxAttempts = 2;
        const evaluationName = "Evaluación Unidad 7: Química Orgánica";
        let timer;
        let timeLeft = 1800; // 30 minutos en segundos
        let startTime;
        let manipulationCount = 0;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function loadQuiz() {
            const quizContainer = document.getElementById('quiz');
            quizContainer.innerHTML = '';
            
            // Shuffle questions and answers
            const shuffledQuizData = shuffle([...quizData]);
            shuffledQuizData.forEach((quizItem, quizIndex) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'question';
                questionElement.innerHTML = `<strong>${quizIndex + 1}. ${quizItem.question}</strong>`;
                
                const optionsList = document.createElement('ul');
                optionsList.className = 'options';

                const shuffledAnswers = shuffle([...quizItem.answers]);
                shuffledAnswers.forEach((answer, answerIndex) => {
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `
                        <label>
                            <input type="radio" name="question${quizIndex}" value="${answer.correct}">
                            ${answer.text}
                        </label>`;
                    optionsList.appendChild(listItem);
                });

                questionElement.appendChild(optionsList);
                quizContainer.appendChild(questionElement);
            });
        }

        document.getElementById('startQuiz').addEventListener('click', () => {
            const fullname = document.getElementById('fullname').value.trim();
            const nie = document.getElementById('nie').value.trim();

            if (fullname && authorizedNIEs.includes(nie)) {
                document.getElementById('quiz').style.display = 'block';
                document.getElementById('startQuiz').style.display = 'none';

                startTimer();
                startTime = new Date();
            } else {
                alert('Por favor, ingresa un NIE válido o asegúrate de que tu nombre esté completo.');
            }
        });

        document.getElementById('submit').addEventListener('click', () => {
            const answerContainers = document.querySelectorAll('.quiz-container .question');
            let score = 0;
            let incorrectAnswers = [];

            answerContainers.forEach((container, index) => {
                const selectedOption = container.querySelector('input[type="radio"]:checked');
                if (selectedOption) {
                    const isCorrect = selectedOption.value === "true";
                    if (isCorrect) {
                        score++;
                    } else {
                        incorrectAnswers.push(index + 1);
                    }
                } else {
                    incorrectAnswers.push(index + 1);
                }
            });

            const endTime = new Date();
            const timeTaken = Math.floor((endTime - startTime) / 1000);

            const fullname = document.getElementById('fullname').value.trim();
            const nie = document.getElementById('nie').value.trim();
            const scorePercentage = (score / quizData.length) * 10;
            const formattedTimeTaken = `${Math.floor(timeTaken / 60)} minutos y ${timeTaken % 60} segundos`;

            // Show results in the modal
            document.getElementById('modalName').innerText = `Nombre: ${fullname}`;
            document.getElementById('modalNIE').innerText = `NIE: ${nie}`;
            document.getElementById('modalDetails').innerText = `Calificación obtenida: ${scorePercentage.toFixed(2)} / 10\nTiempo: ${formattedTimeTaken}\nUnidad: ${evaluationName}\nFecha: ${new Date().toLocaleString()}`;
            document.getElementById('modalIncorrectAnswers').innerHTML = incorrectAnswers.map(num => `<div>Pregunta ${num}</div>`).join('');
            document.getElementById('attemptCount').innerText = `Intento ${attempt + 1} de ${maxAttempts}`;
            document.getElementById('manipulationCount').innerText = `Intentos de manipulación detectados: ${manipulationCount}`;
            document.getElementById('resultModal').style.display = 'block';

            attempt++;
            if (attempt >= maxAttempts) {
                document.getElementById('submit').disabled = true;
            }
        });

        document.querySelector('.close').addEventListener('click', () => {
            document.getElementById('resultModal').style.display = 'none';
        });

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    document.getElementById('submit').click();
                } else {
                    const minutes = Math.floor(timeLeft / 60);
                    const seconds = timeLeft % 60;
                    document.getElementById('timer').innerText = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
                    if (timeLeft <= 600 && timeLeft > 300) {
                        document.getElementById('timer').style.backgroundColor = 'orange';
                    } else if (timeLeft <= 300) {
                        document.getElementById('timer').style.backgroundColor = 'red';
                    }
                }
            }, 1000);
        }

        // Deshabilitar clic derecho
        document.addEventListener('contextmenu', (event) => event.preventDefault());

        // Deshabilitar copiar y pegar
        document.addEventListener('copy', (event) => event.preventDefault());
        document.addEventListener('paste', (event) => event.preventDefault());

        // Monitor de cambios sospechosos
        let originalQuizState = JSON.stringify([...document.querySelectorAll('input[type="radio"]')].map(input => input.checked));
        setInterval(() => {
            const currentQuizState = JSON.stringify([...document.querySelectorAll('input[type="radio"]')].map(input => input.checked));
            if (originalQuizState !== currentQuizState) {
                manipulationCount++;
                originalQuizState = currentQuizState;
            }
        }, 1000);

        // Cargar el cuestionario
        loadQuiz();
    </script>
</body>
</html>
